<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>My Account • Edunancial</title>
<link rel="stylesheet" href="/style.css">
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
<style>.card{border:1px solid #ddd;border-radius:12px;padding:16px;max-width:680px;margin:16px auto}</style>
</head>
<body>
<header class="site-header">
  <nav class="nav">
    <a href="/index.html">Home</a>
    <a href="/catalog.html">Catalog</a>
    <a href="/memberships-en.html">Memberships</a>
    <span class="lang"><a href="/es-account.html">ES</a></span>
  </nav>
</header>

<main class="container">
  <h1>My Account</h1>
  <div id="box" class="card">Loading…</div>
</main>

<footer class="site-footer"><small>© <span id="yr"></span> Edunancial</small></footer>
<script>
document.getElementById('yr').textContent=new Date().getFullYear();
netlifyIdentity.on('init', user => render(user));
netlifyIdentity.on('login', user => { render(user); });
netlifyIdentity.on('logout', () => { render(null); });

function render(user){
  const el = document.getElementById('box');
  if(!user){ el.innerHTML = `
    <p>You’re not signed in.</p>
    <p><a href="#" class="btn" onclick="netlifyIdentity.open('login');return false;">Sign in</a></p>
  `; return; }
  const roles = (user.app_metadata?.roles || []).join(', ') || '—';
  const name = user.user_metadata?.name || user.email;
  const plan = user.user_metadata?.plan || '(Unknown plan)';
  el.innerHTML = `
    <p><strong>${name}</strong><br>${user.email}</p>
    <p><strong>Plan:</strong> ${plan}<br><strong>Roles:</strong> ${roles}</p>
    <p>
      <a class="btn" href="/members/">Members Area</a>
      <a class="btn" href="/pro/">Pro Area</a>
      <a class="btn" href="#" onclick="netlifyIdentity.logout();return false;">Sign out</a>
    </p>
  `;
}
</script>
</body>
</html>
