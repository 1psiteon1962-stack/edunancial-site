<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Edunancial • $1 Live Test Checkout</title>
<style>
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:#fff;color:#111}
  header{background:#c50000;color:#000;font-weight:800;text-align:center;padding:14px 10px;letter-spacing:.5px}
  main{max-width:520px;margin:28px auto 56px;padding:0 16px}
  .card{border:1px solid #e6e6ea;border-radius:12px;padding:18px;box-shadow:0 6px 20px rgba(0,0,0,.04)}
  h1{margin:0 0 8px;font-size:22px}
  .row{display:flex;justify-content:space-between;margin:6px 0}
  .total{font-weight:900;font-size:22px;margin-top:10px}
  #paypal-button-container{margin-top:16px;min-height:45px}
  .help{display:none;margin-top:12px;padding:12px;border:1px solid #e53935;background:#ffebee;color:#b71c1c;border-radius:6px;font-size:.95rem}
  .muted{color:#666;font-size:14px}
</style>
</head>
<body>
<header>EDUNANCIAL CHECKOUT</header>
<main>
  <div class="card">
    <h1>$1 Live Test Payment</h1>
    <div class="row"><span>Item</span><span>Mini Course (test)</span></div>
    <div class="row"><span>Amount</span><span>$1.00</span></div>
    <div class="row total"><span>Total</span><span id="total">$1.00</span></div>

    <!-- PayPal button mounts here -->
    <div id="paypal-button-container"></div>

    <!-- Fallback if PayPal is blocked -->
    <div id="paypal-help" class="help">
      ⚠️ The PayPal checkout button didn’t load.<br><br>
      Please disable <strong>ad-blockers</strong> or <strong>Private DNS</strong> on your phone/browser,
      or try switching between Wi-Fi and mobile data. Then refresh this page.
      (Allow scripts from <em>paypal.com</em>.)
    </div>

    <p class="muted" style="margin-top:12px">
      By paying you agree to our <a href="/terms.html">Terms</a> and <a href="/refunds.html">Refunds</a>.
    </p>
  </div>
</main>

<!-- LIVE PayPal SDK (your real client ID embedded) -->
<script src="https://www.paypal.com/sdk/js?client-id=AX2d6TWWguiffoGPIhKQg5D4avOwsBajcdl-S2tJ7mAHckP_sxucKRXdCgYyyQRQYqKGvWlE2wx4GAxw&currency=USD&components=buttons"></script>

<script>
  (function(){
    const $help = document.getElementById('paypal-help');

    function renderButtons(){
      if(!window.paypal || !paypal.Buttons){
        $help.style.display = 'block';
        return;
      }
      paypal.Buttons({
        style:{ layout:'vertical', color:'gold', shape:'rect', label:'paypal' },
        createOrder: (data, actions) => actions.order.create({
          purchase_units: [{
            description: 'Edunancial Mini Course — $1 Live Test',
            custom_id: 'EDN-MINI-TEST-001',
            amount: { currency_code:'USD', value: '1.00' }
          }]
        }),
        onApprove: (data, actions) =>
          actions.order.capture().then(details => {
            const q = new URLSearchParams({
              orderId: details.id || '',
              paid: '1.00',
              payer: (details.payer && details.payer.name && details.payer.name.given_name) || 'Customer'
            });
            location.href = '/thank-you.html?' + q.toString();
          }),
        onError: err => {
          console.error(err);
          $help.style.display = 'block';
        }
      }).render('#paypal-button-container').catch(() => {
        $help.style.display = 'block';
      });
    }

    // Try now and again shortly (covers slow mobile SDK loads)
    document.addEventListener('DOMContentLoaded', function(){
      renderButtons();
      setTimeout(function(){
        if(!document.querySelector('#paypal-button-container iframe')){
          $help.style.display = 'block';
        }
      }, 5000);
    });
  })();
</script>
</body>
</html>
