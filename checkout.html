<form method="POST" action="/.netlify/functions/paypal-redirect" id="payForm">
  <input type="hidden" name="item_name" value="Mini Course: Edunancial Method">
  <input type="hidden" name="sku" value="EDN-MINI-EM-001">
  <input type="hidden" name="amount" id="amountField" value="75.00">
  <!-- If you want to tag orders (e.g., membership/under18/code) put a compact string in `custom` -->
  <input type="hidden" name="custom" id="customField" value="">
  <button type="submit" class="btn btn-primary">Continue to PayPal</button>
</form>

<script>
  // Example: compute amount & custom from your UI, then set the hidden fields
  (function () {
    const amountField = document.getElementById('amountField');
    const customField = document.getElementById('customField');

    // pull any discounts the page already calculated
    // (replace with your actual variables / calc)
    const base = 75.00;
    const under18 = document.querySelector('#under18')?.checked ? 0.85 : 1.00; // example, adjust
    const early = window.__earlyBirdActive ? 0.85 : 1.00;                      // example, adjust
    let total = (base * under18 * early);

    // $1 private test code (kept in JS only)
    const codeInput = document.querySelector('#discountCode');
    const code = (codeInput && codeInput.value || "").trim();
    if (code === "PR12345$$") total = 1.00;

    amountField.value = total.toFixed(2);
    customField.value = JSON.stringify({ under18: !!document.querySelector('#under18')?.checked, code });
  })();
</script>
