<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Libros — Edunancial</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>
  <script src="/header.js"></script>
  <script src="/js/membership-gate.js"></script>

  <main class="container" style="padding:18px 0">
    <h1>Libros</h1>
    <p><strong>Rojo</strong> = Bienes Raíces · <strong>Blanco</strong> = Activos de Papel · <strong>Azul</strong> = Negocios</p>

    <div id="list" style="display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))"></div>
    <p style="margin-top:16px"><a class="btn" href="/es-cart.html">Ir al Carrito</a></p>
  </main>

<script>
const BOOKS = [
  { id:"EDN-BK-RE-001", name:"Comprar y Revender Casas con Ganancia", price:18.99 },
  { id:"EDN-BK-RE-002", name:"Derechos y Gravámenes: De lo Básico a tu Primera Compra", price:18.99 },
  { id:"EDN-BK-PA-001", name:"Trading de Opciones: Guía para Puts, Calls y Estrategia", price:18.99 },
  { id:"EDN-BK-PA-002", name:"Selección Inteligente de Acciones para Jóvenes y Padres", price:18.99 },
  { id:"EDN-BK-BU-001", name:"El Negocio se Trata de Ganar", price:18.99 },
  { id:"EDN-BK-BU-002", name:"Tu Primera LLC de la Manera Correcta", price:18.99 }
];

let CONFIG = {};
(async()=>{ try{ const r=await fetch("/config.json",{cache:"no-store"}); if(r.ok) CONFIG=await r.json(); }catch(_){} render(); })();

function addToCart(itemId){
  const qty = Number(document.getElementById("qty-"+itemId).value||1);
  const code = (document.getElementById("code-"+itemId).value||"").trim();
  const item = BOOKS.find(b=>b.id===itemId);
  if(!item) return;
  const cart = JSON.parse(localStorage.getItem("edn_cart")||"[]");
  cart.push({ type:"book", sku:item.id, name:item.name, price:item.price, qty, code });
  localStorage.setItem("edn_cart", JSON.stringify(cart));
  alert("Agregado al carrito");
}

function card(b){
  return `
  <div style="border:1px solid #e6e6e6;border-radius:12px;padding:16px">
    <h3 style="margin:0 0 4px">${b.name}</h3>
    <div><strong>SKU:</strong> ${b.id} · <strong>$${b.price.toFixed(2)}</strong></div>
    <div class="row" style="margin-top:10px">
      <input id="code-${b.id}" placeholder="Código de descuento" style="height:36px;border:1px solid #e6e6e6;border-radius:8px;padding:0 10px;width:52%">
      <input id="qty-${b.id}" type="number" min="1" value="1" style="height:36px;width:68px;border:1px solid #e6e6e6;border-radius:8px;padding:0 10px">
      <button class="btn" onclick="addToCart('${b.id}')">Agregar</button>
    </div>
  </div>`;
}

function render(){
  document.getElementById("list").innerHTML = BOOKS.map(card).join("");
}
</script>
</body>
</html>
