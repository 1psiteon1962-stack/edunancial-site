<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Cursos — Edunancial</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>
  <script src="/header.js"></script>
  <script src="/js/membership-gate.js"></script>

  <main class="container" style="padding:18px 0">
    <h1>Cursos</h1>
    <div id="list" style="display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(280px,1fr))"></div>
    <p style="margin-top:16px"><a class="btn" href="/es-cart.html">Ir al Carrito</a></p>
  </main>

<script>
const COURSES = [
  { id:"EDN-CRS-MIX-001", name:"El Método Edunancial — Mini Curso", price:75.00 },
  { id:"EDN-CRS-BO-001", name:"Formación de Negocios a Fondo", price:199.00 }
];

let CONFIG={};
(async()=>{ try{ const r=await fetch("/config.json",{cache:"no-store"}); if(r.ok) CONFIG=await r.json(); }catch(_){} render(); })();

function addToCart(id){
  const qty = Number(document.getElementById("qty-"+id).value||1);
  const code = (document.getElementById("code-"+id).value||"").trim();
  const item = COURSES.find(c=>c.id===id); if(!item) return;
  const cart = JSON.parse(localStorage.getItem("edn_cart")||"[]");
  cart.push({ type:"course", sku:item.id, name:item.name, price:item.price, qty, code });
  localStorage.setItem("edn_cart", JSON.stringify(cart));
  alert("Agregado al carrito");
}

function card(c){
  return `
    <div style="border:1px solid #e6e6e6;border-radius:12px;padding:16px">
      <h3 style="margin:0 0 4px">${c.name}</h3>
      <div><strong>SKU:</strong> ${c.id} · <strong>$${c.price.toFixed(2)}</strong></div>
      <div class="row" style="margin-top:10px">
        <input id="code-${c.id}" placeholder="Código de descuento" style="height:36px;border:1px solid #e6e6e6;border-radius:8px;padding:0 10px;width:52%">
        <input id="qty-${c.id}" type="number" min="1" value="1" style="height:36px;width:68px;border:1px solid #e6e6e6;border-radius:8px;padding:0 10px">
        <button class="btn" onclick="addToCart('${c.id}')">Agregar</button>
      </div>
    </div>`;
}

function render(){ document.getElementById("list").innerHTML = COURSES.map(card).join(""); }
</script>
</body>
</html>
