<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Membership — Edunancial</title>
<link rel="stylesheet" href="/style.css">
</head>
<body>
<div class="container">
  <h1>Membership</h1>
  <section class="card" id="tiers"></section>
</div>

<script src="/header.js?v=7" defer></script>
<script>
document.addEventListener('DOMContentLoaded', async ()=>{
  const cfg=await (await fetch('/config.json?ts='+Date.now())).json();
  const el=document.getElementById('tiers');
  const tiers=[['starter','Starter'],['growth','Growth'],['pro','Pro']];
  el.innerHTML=tiers.map(([k,label])=>{
    const t=cfg.memberships[k];
    return `<div class="product">
      <div><h3>${label}</h3><div class="small">$${(+t.price).toFixed(2)}/mo</div></div>
      <div><button class="btn" data-sku="MEM-${k.toUpperCase()}">Add to Cart</button></div>
    </div>`;
  }).join('');
  el.addEventListener('click',e=>{
    const b=e.target.closest('button[data-sku]'); if(!b) return;
    const sku=b.dataset.sku; const k=sku.replace('MEM-','').toLowerCase(); const t=cfg.memberships[k];
    const item={sku, title:`Membership — ${t.name}`, price:+t.price, qty:1};
    const cart=JSON.parse(localStorage.getItem('EDN_CART')||'[]'); cart.push(item);
    localStorage.setItem('EDN_CART', JSON.stringify(cart)); window.EDN.updateCartCount(); alert('Added '+item.title);
  });
});
</script>
</body>
</html>
