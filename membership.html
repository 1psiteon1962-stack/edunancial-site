<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Edunancial — Membership</title>
<meta name="color-scheme" content="light dark">
<!-- PayPal SDK: replace client-id when ready -->
<script src="https://www.paypal.com/sdk/js?client-id=YOUR_PAYPAL_CLIENT_ID&currency=USD"></script>
<style>
  :root{
    --bg:#0b1220; --panel:#0f172a; --ink:#f8fbff; --muted:#d6e0ee; --line:#283a64;
    --red:#ef4444; --white:#ffffff; --blue:#2563eb; --accent:#22c55e;
    --radius:22px; --maxw:1200px;
    --fs-body:clamp(18px,1.6vw,20px); --fs-h1:clamp(32px,3.3vw,44px);
  }
  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;font-size:var(--fs-body)}
  .wrap{max-width:var(--maxw);margin:auto;padding:clamp(24px,3.2vw,48px)}
  header{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px}
  header a{color:var(--ink);text-decoration:none;font-weight:800}
  h1{margin:.2rem 0;font-size:var(--fs-h1)}
  .muted{color:var(--muted)}
  .grid{display:grid;gap:20px;margin-top:10px}
  @media(min-width:980px){.grid{grid-template-columns:1.1fr .9fr}}
  .card{background:var(--panel);border:2px solid var(--line);border-radius:var(--radius);padding:clamp(22px,2.8vw,32px)}
  /* Plan cards */
  .plans{display:grid;gap:16px}
  .plan{display:flex;gap:16px;align-items:center;background:#0d203f;border:2px solid var(--line);border-radius:18px;padding:16px}
  .plan input{width:26px;height:26px;accent-color:var(--blue);cursor:pointer}
  .plan .title{font-weight:900}
  .badge{display:inline-block;background:linear-gradient(90deg,var(--red),var(--white),var(--blue));color:#0a0f1a;
         border-radius:999px;padding:.25rem .6rem;font-size:.85em;margin-left:.5rem;font-weight:900}
  .price{font-weight:900}
  .best{border-color:var(--accent);box-shadow:0 0 0 3px rgba(34,197,94,.25)}
  /* Summary */
  #summary{line-height:1.7}
  .total{display:flex;justify-content:space-between;font-weight:900;font-size:clamp(20px,1.7vw,24px);margin-top:10px}
  /* Buttons */
  .cta-btn{display:inline-block;padding:1rem 1.25rem;border-radius:18px;font-weight:900;text-decoration:none;
           color:#0a0f1a;background:linear-gradient(90deg,var(--red),var(--white),var(--blue));box-shadow:0 12px 32px rgba(0,0,0,.34)}
  .row{display:flex;justify-content:space-between;align-items:center;gap:14px;flex-wrap:wrap}
  .coupon{display:flex;gap:10px;align-items:center}
  .coupon input{padding:.75rem 1rem;border-radius:14px;border:2px solid var(--line);background:#0b1426;color:var(--ink);min-width:220px}
  .note{font-size:.9em;color:var(--muted);margin-top:10px}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <a href="/index.html">← Our Story</a>
    <nav><a href="/index.html">Home</a></nav>
  </header>

  <h1>Membership</h1>
  <p class="muted">Choose the membership plan that works best for your situation. You can upgrade at any time.</p>

  <div class="grid">
    <!-- Left: plan selection -->
    <div class="card">
      <h2 style="margin-top:0">Plans</h2>
      <div class="plans" id="plans">
        <label class="plan">
          <input type="radio" name="plan" value="entry" checked>
          <div>
            <div class="title">Entry Membership <span class="badge">Popular</span></div>
            <div class="muted">Library access + pamphlet + 15% coupon</div>
          </div>
          <div style="margin-left:auto" class="price">$9.99 / mo</div>
        </label>

        <label class="plan best">
          <input type="radio" name="plan" value="standard">
          <div>
            <div class="title">Standard Membership <span class="badge">Best Value</span></div>
            <div class="muted">Full library, tools, coaching</div>
          </div>
          <div style="margin-left:auto" class="price">$29.00 / mo</div>
        </label>

        <label class="plan">
          <input type="radio" name="plan" value="premium">
          <div>
            <div class="title">Premium Membership</div>
            <div class="muted">Everything + monthly live calls + bigger discounts</div>
          </div>
          <div style="margin-left:auto" class="price">$59.00 / mo</div>
        </label>
      </div>

      <p class="note">Note: For demonstration we process the first month as a one-time payment. When you’re ready, switch to PayPal Subscriptions for automatic monthly billing.</p>
    </div>

    <!-- Right: summary + PayPal -->
    <div class="card">
      <div class="row">
        <h2 style="margin:0">Checkout</h2>
        <div class="coupon">
          <input id="coupon" placeholder="Coupon code (optional)" />
          <button class="cta-btn" id="apply">Apply</button>
        </div>
      </div>

      <div id="summary" class="muted" style="margin-top:10px"></div>
      <div class="total"><span>Total</span><span id="total">$0.00</span></div>

      <div style="margin-top:16px" id="paypal-button-container"></div>
      <div id="status" class="note"></div>

      <div style="text-align:center;margin-top:16px">
        <a class="cta-btn" href="/index.html">Back to Our Story</a>
      </div>
    </div>
  </div>
</div>

<script>
  // ——— Cart + pricing ———
  const PLANS = {
    entry:   { name:'Entry Membership',    price: 9.99 },
    standard:{ name:'Standard Membership', price:29.00 },
    premium: { name:'Premium Membership',  price:59.00 }
  };
  let selected='entry';
  let coupon=null;

  const $ = id => document.getElementById(id);
  const $summary = $('summary'), $total = $('total'), $status = $('status');

  function format(n){ return '$' + n.toFixed(2); }

  function computeTotal(){
    let price = PLANS[selected].price;
    // Simple demo coupon: SAVE15 = 15% off first payment
    let discount = (coupon==='SAVE15') ? price * 0.15 : 0;
    return { price, discount, total: price - discount };
  }

  function render(){
    const plan = PLANS[selected];
    const t = computeTotal();
    const lines = [
      `<strong>Plan:</strong> ${plan.name}`,
      (coupon==='SAVE15') ? `<strong>Coupon:</strong> SAVE15 (-${format(t.discount)})` : ''
    ].filter(Boolean);
    $summary.innerHTML = lines.join('<br>');
    $total.textContent = format(t.total);
  }

  document.querySelectorAll('input[name="plan"]').forEach(r=>{
    r.addEventListener('change',()=>{ selected=r.value; render(); });
  });
  $('apply').addEventListener('click', ()=>{
    coupon = $('coupon').value.trim().toUpperCase() || null;
    render();
  });
  render();

  // ——— PayPal Buttons ———
  paypal.Buttons({
    style:{ layout:'vertical', shape:'rect', label:'paypal', tagline:false, height:45 },

    createOrder: (data, actions)=>{
      const plan = PLANS[selected];
      const t = computeTotal();
      // Store selection for the thank-you page
      sessionStorage.setItem('lastPurchase', JSON.stringify({ plan:selected, name:plan.name, total:t.total, coupon }));
      return actions.order.create({
        intent:'CAPTURE',
        purchase_units:[{
          description: `${plan.name} (first month)`,
          amount:{
            currency_code:'USD',
            value: t.total.toFixed(2),
            breakdown:{
              item_total:{ currency_code:'USD', value: t.total.toFixed(2) }
            }
          },
          items:[{
            name: `${plan.name} — First Month`,
            quantity: '1',
            unit_amount:{ currency_code:'USD', value: t.total.toFixed(2) }
          }]
        }]
      });
    },

    onApprove: async (data, actions)=>{
      const details = await actions.order.capture();
      // Redirect back to site with order id (no rebuild needed)
      const params = new URLSearchParams({ orderID: details.id || '', from: 'membership' });
      window.location.href = `/thank-you.html?${params.toString()}`;
    },

    onError: (err)=>{ console.error(err); $status.textContent='There was a problem processing your payment.'; }
  }).render('#paypal-button-container');
</script>
</body>
</html>
