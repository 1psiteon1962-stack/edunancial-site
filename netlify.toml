[build]
  publish = "."
  command = "npm run build || echo 'no build'"

[build.environment]
  NODE_VERSION = "20"

# Context: Production (main)
[context.production.environment]
  NODE_ENV = "production"
  PAYPAL_MODE = "live"

# Context: Staging (staging branch)
[context.staging]
  command = "npm run build:staging || npm run build || echo 'no build'"
[context.staging.environment]
  NODE_ENV = "staging"
  PAYPAL_MODE = "sandbox"

# Context: Deploy Previews (PRs)
[context.deploy-preview.environment]
  NODE_ENV = "preview"
  PAYPAL_MODE = "sandbox"

# Optional: route /api/* to functions
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/:splat"
  status = 200
