<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>PayPal Button Test</title>
  <style>
    body{font-family:system-ui,Arial,sans-serif;margin:0}
    .banner{background:#c50000;color:#000;font-weight:700;text-align:center;padding:12px}
    .wrap{max-width:520px;margin:24px auto;padding:16px}
    #status{font-size:14px;color:#555;margin:10px 0}
    .err{padding:10px;border-left:4px solid #c50000;background:#fff4f4;color:#6b1111;border-radius:6px;display:none}
  </style>
</head>
<body>
  <div class="banner">EDUNANCIAL • PayPal Test</div>
  <div class="wrap">
    <div id="status">Loading PayPal SDK…</div>
    <div id="paypal-button-container"></div>
    <div id="pp-error" class="err"></div>
  </div>

  <!-- Load SDK WITHOUT defer, with buttons component -->
  <script src="https://www.paypal.com/sdk/js?client-id=AX2d6TWWguiffoGPIhKQg5D4avOwsBajcdl-S2tJ7mAHckP_sxucKRXdCgYyyQRQYqKGvWlE2wx4GAxw&currency=USD&components=buttons"
          onload="window.__ppLoaded=true"
          onerror="document.getElementById('pp-error').style.display='block';document.getElementById('pp-error').textContent='SDK failed to load (blocked by network or content blocker).';">
  </script>

  <script>
    const $status = document.getElementById('status');
    const $err = document.getElementById('pp-error');

    function render() {
      if (!window.paypal || !paypal.Buttons) {
        $status.textContent = 'PayPal not available on this device/network.';
        $err.style.display = 'block';
        $err.textContent = 'If you use a content/ad blocker or privacy DNS, allow paypal.com and refresh.';
        return;
      }
      $status.textContent = 'SDK loaded. Rendering button…';
      paypal.Buttons({
        style: { layout:'vertical', color:'gold', shape:'rect', label:'paypal' },
        createOrder: (data, actions) => actions.order.create({
          purchase_units: [{ amount: { value: '1.00', currency_code:'USD' }, description:'Button test' }]
        }),
        onApprove: (data, actions) => actions.order.capture().then(() => { $status.textContent = 'Success!'; })
      }).render('#paypal-button-container');
    }

    // try immediately, and again shortly (handles slow mobiles)
    document.addEventListener('DOMContentLoaded', () => {
      setTimeout(render, 50);
      setTimeout(render, 400);
    });
  </script>
</body>
</html>
